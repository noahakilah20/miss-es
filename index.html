<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Jogo da Aninha com VÃ­deo ðŸ’–</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #fff;
      font-family: Arial, sans-serif;
    }
    .container {
      position: relative;
      width: 400px;
      height: 600px;
      margin: 20px auto;
      border: 2px solid #000;
      background: #fff;
    }
    canvas {
      display: block;
      background: #fff;
    }
  </style>
</head>
<body>
  <div class="container">
    <canvas id="gameCanvas" width="400" height="600"></canvas>
  </div>
  <audio id="hitSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_f6a22995b5.mp3?filename=game-hit-1992.mp3"></audio>
  <audio id="winSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_99e3f3489b.mp3?filename=game-win-1991.mp3"></audio>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const hitSound = document.getElementById("hitSound");
    const winSound = document.getElementById("winSound");

    const paddle = {
      width: 80,
      height: 10,
      x: canvas.width / 2 - 40,
      y: canvas.height - 30,
      speed: 5,
    };

    const ball = {
      x: canvas.width / 2,
      y: canvas.height - 50,
      radius: 7,
      dx: 2,
      dy: -2,
    };

    const blockRowCount = 5;
    const blockColumnCount = 8;
    const blockWidth = 40;
    const blockHeight = 20;
    const blockPadding = 5;
    const blockOffsetTop = 50;
    const blockOffsetLeft = 30;

    let currentLevel = 1;
    let blocks = [];

    const level3Colors = ["#FFC0CB", "#FF69B4", "#FFB6C1", "#FFA07A", "#F08080"];

    function createBlocks(level) {
      blocks = [];
      for (let c = 0; c < blockColumnCount; c++) {
        for (let r = 0; r < blockRowCount; r++) {
          let brickX = c * (blockWidth + blockPadding) + blockOffsetLeft;
          let brickY = r * (blockHeight + blockPadding) + blockOffsetTop;
          blocks.push({ x: brickX, y: brickY, status: 1, color: level3Colors[(r + c) % level3Colors.length] });
        }
      }
    }

    createBlocks(currentLevel);

    function drawBlocks() {
      blocks.forEach(block => {
        if (block.status === 1) {
          if (currentLevel === 3) {
            ctx.beginPath();
            ctx.arc(block.x + blockWidth / 2, block.y + blockHeight / 2, 10, 0, Math.PI * 2);
            ctx.fillStyle = block.color;
            ctx.fill();
            ctx.closePath();
          } else {
            const heart = new Image();
            heart.src = "https://em-content.zobj.net/thumbs/120/apple/354/heart-decoration_1f49f.png";
            ctx.drawImage(heart, block.x, block.y, blockWidth, blockHeight);
          }
        }
      });
    }

    function drawPaddle() {
      ctx.fillStyle = "#00f";
      ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
    }

    function drawBall() {
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
      ctx.fillStyle = "#f39";
      ctx.fill();
      ctx.closePath();
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBlocks();
      drawPaddle();
      drawBall();

      ball.x += ball.dx;
      ball.y += ball.dy;

      if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) ball.dx *= -1;
      if (ball.y - ball.radius < 0) ball.dy *= -1;
      if (ball.y + ball.radius > canvas.height) {
        alert("Fim de jogo!");
        document.location.reload();
      }

      if (
        ball.x > paddle.x &&
        ball.x < paddle.x + paddle.width &&
        ball.y + ball.radius > paddle.y
      ) {
        ball.dy *= -1;
      }

      blocks.forEach(block => {
        if (block.status === 1) {
          if (
            ball.x > block.x &&
            ball.x < block.x + blockWidth &&
            ball.y > block.y &&
            ball.y < block.y + blockHeight
          ) {
            ball.dy *= -1;
            block.status = 0;
            hitSound.currentTime = 0;
            hitSound.play();
          }
        }
      });

      if (blocks.every(b => b.status === 0)) {
        if (currentLevel < 3) {
          currentLevel++;
          createBlocks(currentLevel);
          ball.x = canvas.width / 2;
          ball.y = canvas.height - 50;
          ball.dx = 2;
          ball.dy = -2;
        } else {
          winSound.play();
          alert("VocÃª venceu todas as fases! ðŸ’–");
          document.location.reload();
        }
      }

      requestAnimationFrame(draw);
    }

    document.addEventListener("keydown", e => {
      if (e.key === "ArrowLeft" && paddle.x > 0) paddle.x -= paddle.speed * 2;
      if (e.key === "ArrowRight" && paddle.x + paddle.width < canvas.width) paddle.x += paddle.speed * 2;
    });

    draw();
  </script>
</body>
</html>
